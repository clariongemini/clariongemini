-- Envanter-Servisi Veritabanı Şeması
CREATE TABLE `urun_varyantlari` ( `varyant_id` INT AUTO_INCREMENT PRIMARY KEY, `urun_id` INT NOT NULL, `stok_adedi` INT NOT NULL DEFAULT 0, `agirlikli_ortalama_maliyet` DECIMAL(10, 4) NOT NULL DEFAULT 0.0000 ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
CREATE TABLE `envanter_hareketleri` ( `hareket_id` BIGINT AUTO_INCREMENT PRIMARY KEY, `varyant_id` INT NOT NULL, `kullanici_id` INT, `hareket_tipi` ENUM('satin_alma', 'satis', 'iade_giris', 'sayim_duzeltme_giris', 'sayim_duzeltme_cikis') NOT NULL, `referans_id` INT, `degisim_miktari` INT NOT NULL, `onceki_stok` INT NOT NULL, `sonraki_stok` INT NOT NULL, `maliyet` DECIMAL(10, 4), `tarih` TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (`varyant_id`) REFERENCES `urun_varyantlari`(`varyant_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
