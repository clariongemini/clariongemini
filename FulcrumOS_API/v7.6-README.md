# ProSiparis API v7.6 - Yönetim Paneli (Faz 6: İade Yönetimi)

Bu sürüm, "Müşteri Sipariş Yaşam Döngüsü"nü tamamlayarak, ProSiparis Yönetim Paneli'ne platformun en kritik operasyonel modüllerinden biri olan **İade Yönetimi (RMA)**'nı ekler. Tıpkı Sipariş Yönetimi gibi, bu modül de yapılan her değişikliği kaydeden bir **Denetim Kaydı (Audit Log)** altyapısı içerir.

## v7.6 Yenilikleri

- **Yeni Frontend Modülü: İade Yönetimi (CRUD):** Admin paneline, iade taleplerini (RMA) listeleme, detaylarını görüntüleme ve durumlarını (`Talep Alındı`, `Onaylandı`, `Odeme Yapıldı` vb.) yönetme yeteneklerini sunan tam özellikli bir modül eklendi.
- **Yeni Backend Altyapısı (Iade-Servisi):** `Iade-Servisi`, admin paneline hizmet vermek üzere, iade taleplerini ve denetim kayıtlarını yöneten, `iade_yonet` yetkisiyle korunan yeni bir `/api/admin/iadeler` endpoint seti ile güçlendirildi.
- **Entegre Denetim Kaydı:** Bir iade talebinin durumu her değiştiğinde, bu değişikliği kimin ve ne zaman yaptığını kaydeden bir `iade_gecmisi_loglari` tablosu ve ilgili iş mantığı Iade-Servisi'ne eklendi. Bu geçmiş, İade Detay sayfasında gösterilir.
- **Yeni Backend Yetkisi: `iade_yonet`:** İade yönetimi işlemlerini güvence altına almak için **Auth-Servisi**'ne `iade_yonet` adında yeni bir yetki eklendi.

## Mimari Konseptler (v7.6 Güncellemeleri)

- **Sipariş Yaşam Döngüsünün Tamamlanması:** v7.5'te eklenen Sipariş Yönetimi (giden operasyon), bu sürümde eklenen İade Yönetimi (gelen operasyon) ile birleşerek, bir müşterinin sipariş yolculuğunu baştan sona (%100) yönetilebilir hale getirir. Bu, platformun operasyonel bütünlüğü için kritik bir adımdır.
- **Durum ve Eylem Odaklı Tasarım:** İade modülü, v7.5'te Sipariş Yönetimi için kurulan "durum ve eylem" odaklı tasarım desenini takip eder. `ReturnDetailPage` (okuma) ve `ReturnStatusUpdateModal` (yazma) gibi bileşenler, karmaşık iş akışlarını yönetilebilir parçalara ayırır.

## API Endpoint'leri (v7.6)

### Auth-Servisi (Güncelleme)
-   **Yeni Yetki:** `yetkiler` tablosuna `iade_yonet` yetkisi eklendi.

### Iade-Servisi (YENİ Backend Altyapısı)
-   **Yeni Tablo:** `iade_gecmisi_loglari` tablosu eklendi.
-   **Yeni Endpoint'ler:**
    -   `GET /api/admin/iadeler`: Tüm iade taleplerini listeler.
    -   `GET /api/admin/iadeler/:iadeId`: Belirli bir iade talebinin detaylarını döner.
    -   `GET /api/admin/iadeler/:iadeId/gecmis`: Belirli bir iade talebinin denetim kaydı geçmişini döner.
    -   `PUT /api/admin/iadeler/:iadeId/durum`: Bir iade talebinin durumunu günceller ve log atar.
    (Tüm endpoint'ler `iade_yonet` yetkisi gerektirir.)
